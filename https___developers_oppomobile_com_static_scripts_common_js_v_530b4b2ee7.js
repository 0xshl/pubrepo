!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n;return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){var validator=require('../../../vendor/scripts/validator.min');!function(root,factory){if('function'===typeof define&&define.amd)define([],factory);else if('object'===typeof exports)module.exports=factory();else root.returnExports=factory()}(this,function(){var message={},originMessage={},defaultMsg='网络异常，请稍后重试',userPwd1='',mainContent=$('.main-content'),$form=$('.validation'),$mustBeDifferent=$form.find('[data-type="mustbedifferent"]'),$errorMsg=$('#errorMsg'),$notification=$('.modal-body .alert-warning'),$loading=$('.loading-shadow'),eventMap={},timeout=0,paraArr=[],paraStr='',passwordLevel=function(pwd){var ls=0;if(pwd.match(/([a-z])+/))ls++;if(pwd.match(/([0-9])+/))ls++;if(pwd.match(/([A-Z])+/))ls++;if(pwd.match(/[^a-zA-Z0-9]+/))ls++;return ls},isEmail=function(email){return-1!=email.search(/^(\w+((-\w+)|(\.\w+))*)+\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)},options={errorCallback:function(unvalidFields){$(unvalidFields).each(function(i,item){if(0==i&&mainContent.length>0)mainContent.animate({scrollTop:mainContent.scrollTop()+item.$el.offset().top-parseInt($('body').css('padding-top'))},500)})},after:function(b){if((new Date).getTime()-justNow<1500)return;justNow=(new Date).getTime();if($('.validation:visible').attr('next')){$('.validation:visible').removeAttr('next');var ename='next-step';if('undefined'===typeof eventMap[ename])eventMap[ename]=$.Event(ename);$('body').trigger(eventMap[ename]);return!1}$loading.show();var url=$('.validation:visible').attr('redirect')||'/',paras=$('.validation:visible').attr('data-param'),callback=$('.validation:visible').attr('callback'),pushAppid=$('.validation:visible').attr('pushAppid'),noRedirect=$('.validation:visible').attr('noredirect'),noRedirectCallback=$('.validation:visible').attr('noRedirectCallback'),needLogout=$('.validation:visible').attr('logout'),needReload=$('.validation:visible').attr('needreload'),needChangeRedirect=$('.validation:visible').attr('needchangeredirect'),showErrMsgHere=$('.validation:visible').attr('showErrMsgHere'),needCaptcha=$('.validation:visible').attr('needCaptcha'),modalMessage=$('.validation:visible').attr('message'),formDataDealer=$('.validation:visible').attr('formDataDealer'),successMessageDealer=$('.validation:visible').attr('successMessageDealer'),onSuccessDealer=$('.validation:visible').attr('onSuccessDealer');$.ajax({type:"POST",url:$('.validation:visible').attr('action'),data:'function'===typeof window[formDataDealer]?window[formDataDealer]():$('.validation:visible').serialize(),success:function(res){$loading.hide();if(0===res.errno){if(paras)paraArr=paras.split(',');for(var i=0;i<paraArr.length;i++)paraStr=paraStr+paraArr[i]+'='+$('.validation:visible').find('[name="'+paraArr[i]+'"]').val();if(pushAppid&&paraArr.indexOf('app_id')<0)paraStr=paraStr+'&app_id='+res.data['app_id'];if(modalMessage){$('#commonModal').css({zIndex:999999});if('function'===typeof window[successMessageDealer])window[successMessageDealer]($('#commonModal'));else $('#commonModal .modal-body').text(modalMessage);timeout=3e3}$('#commonModal').modal('show');setTimeout(function(){$('#commonModal').modal('hide');$('body').removeClass('modal-open');$('.modal-backdrop').remove();if(needReload)window.location.reload();if(callback){var ename;if('undefined'===typeof eventMap[ename='admin-redirect'])eventMap[ename]=$.Event(ename);window.admin_url=url;$('body').trigger(eventMap[ename])}else if('function'==typeof window[onSuccessDealer])window[onSuccessDealer]();else{if(noRedirect)if(noRedirectCallback&&'function'===typeof window[noRedirectCallback]){window[noRedirectCallback]();return!1}else return!1;if(needLogout){$.ajax({type:"POST",url:'/user/logout',success:function(res){if(0===res.errno)window.location.reload()}});return!1}if(paraStr)window.location=url+(url.indexOf('?')?'&':'?')+paraStr;else window.location=url;if(needChangeRedirect){var ename;if('undefined'===typeof eventMap[ename='change-redirect'])eventMap[ename]=$.Event(ename);$('body').trigger(eventMap[ename])}}},timeout)}else if(900017===res.errno){var email=res.data.email||$('input[name="userName"]').val();if(!isEmail(email))$('.modal:visible .alert-warning').text('Your account is not activated，please sign in with email').show();else window.location='/user/account/notifyemail?type=1&email='+(res.data.email||$('input[name="userName"]').val())}else{if(showErrMsgHere)$('.modal:visible .alert-warning').text(res.data.message).show();else if($errorMsg){$errorMsg.find('.modal-body p').text(res.data.message);$errorMsg.modal('show')}setTimeout(function(){$errorMsg.modal('hide')},3e3);if(needCaptcha){var ename='reset-captcha';if('undefined'===typeof eventMap[ename])eventMap[ename]=$.Event(ename);$('body').trigger(eventMap[ename])}}}})},isErrorOnParent:!0},patterns={username:function(text){var userName=$.trim(text),userName_validate=userName.match(/[\s\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=,;\\\\]+/),userName_validate2=userName.match(/[\uFF00-\uFFFF]/),userName_len=userName.length,pass=!0;if(!message['username'])message['username']='';if(!message['userName'])message['userName']='';if(userName_len>12){message['username']=message['userName']='The max length of username is 12';pass=!1}else if(userName_len<4){message['username']=message['userName']='The min length of username is 4';pass=!1}else if(!isNaN(userName)){message['username']=message['userName']='Username cannot be just composed of numbers';pass=!1}else if(userName_validate2){message['username']=message['userName']='Only numbers and letters';pass=!1}else if(userName_validate){message['username']=message['userName']='Only numbers and letters';pass=!1}else pass=!0;return pass},email:function(text){var email=$.trim(text),pass=!0;if(!isEmail(email)){message['email']='Invalid email address!';message['business_email']='Invalid email address!';message['contactEmail']='Invalid email address!';pass=!1}else pass=!0;return pass},pwd:function(text){var isPasswordRegex=/^[0-9a-zA-Z_]{0,50}$/,pass=!0;if(0==(userPwd1=$.trim(text)).length){message['password']="Please type in password";pass=!1}else if(passwordLevel(userPwd1)<3){message['password']="Password must be contain uppercase,lowercase letters and numbers";pass=!1}else if(userPwd1.length<6){message['password']="Password min length is 6";pass=!1}else if(userPwd1.length>16){message['password']="Password max length is 16";pass=!1}else pass=!0;if(0==pass)userPwd1='';return pass},repasswd:function(text){var pass=!0;if(text!=userPwd1){message['repasswd']="The password does not match the above one!";pass=!1}else pass=!0;return pass},mustbedifferent:function(){var pass=!0,tempVal='';$mustBeDifferent.each(function(i,n){if(n.value==tempVal){message['mustbedifferent']=message['app_subname']="This name cannot be same as app name";pass=!1}tempVal=n.value});return pass},companyname:function(text){var name=$.trim(text),name_validate=name.match(/[\s\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=,;\\\\]+/),name_length=name.length,pass=!0;if(name_length>50||name_length<2){message['companyname']="The length of company name ranges from 2 to 50.";pass=!1}else if(name_validate){message['companyname']="Invalid company name!";pass=!1}else pass=!0;return pass},legalname:function(text){var name=$.trim(text),name_validate=name.match(/[\s\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=,;\\\\]+/),name_validate2=name.match(/[\uFF00-\uFFFF]/),pass=!0;if(!isNaN(name)){message['legalname']="cannot be numbers";pass=!1}else if(name.length<2||name.length>30){message['legalname']="name length is 2-30";pass=!1}else pass=!0;return pass},idcard:function(text){var idCard=$.trim(text),regIdCard=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,pass=!0;if(idCard.match(regIdCard)){if(18==idCard.length){for(var idCardWi=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],idCardY=[1,0,10,9,8,7,6,5,4,3,2],idCardWiSum=0,i=0;i<17;i++)idCardWiSum+=idCard.substring(i,i+1)*idCardWi[i];var idCardMod=idCardWiSum%11,idCardLast=idCard.substring(17);if(2==idCardMod)if("x"==idCardLast.toLowerCase())pass=!0;else{message['idcard']="Invalid ID number！";pass=!1}else if(idCardLast==idCardY[idCardMod])return!0;else{message['idcard']="Invalid ID number！";pass=!1}}}else{message['idcard']="Invalid ID number!";pass=!1}return pass},orgcode:function(text){var orgcode,orgcode_length=$.trim(text).length,pass=!0;if(10!=orgcode_length&&9!=orgcode_length){message['orgcode']="Please fill in number from 9th digit to the last but one of the Uniform Social Credit Code.";message['orgCode']="Please fill in number from 9th digit to the last but one of the Uniform Social Credit Code.";pass=!1}return pass},saleid:function(text){var saleid=$.trim(text),saleid_length=saleid.length,pass=!0;if(!saleid.match(/^[0-9a-zA-Z]{11,20}$/)){message['saleid']="Please fill in valid license code";pass=!1}if(saleid_length<11){message['saleid']="License code cannot less than 11-digit";pass=!1}if(saleid_length>20){message['saleid']="License code cannot exceed 20-digit";pass=!1}return pass},tel:function(text){var tel=$.trim(text),pass=!0;if(''!=tel&&!/^\d{7,14}$/.test(tel)){message['tel']='Invalid tel number';pass=!1}else if(isNaN(tel)){message['tel']='Invalid tel number';pass=!1}else pass=!0;return pass},mobile:function(text){var tel=$.trim(text),pass=!0;if(''!=tel&&!/^\+?\d{8,15}$/.test(tel)){message['mobile']='Invalid mobile number';message['phone']='Invalid mobile number';message['contactMobile']='Invalid mobile number';message['business_phone']='Invalid mobile number';message['contactMobileNo']='Invalid mobile number';pass=!1}else pass=!0;return pass},realname:function(text){var name=$.trim(text),Name_validate=name.match(/[\s\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=,;\\\\]+/),name_length=name.length,pass=!0;if(name_length>30||name_length<2){message['realname']=message['business_username']='Name ranges from 2 to 30 words.';pass=!1}else if(Name_validate){message['realname']=message['business_username']='Name must consist of letter and number.';pass=!1}else pass=!0;return pass},qq:function(text){var qq=$.trim(text),pass=!0;if(qq.length<1){message['qq']='Please fill in QQ.';message['contactQQ']='Please fill in QQ';pass=!1}else if(qq.length>0)if(/^[1-9]\d{4,10}$/.test(qq))pass=!0;else{message['qq']='Invalid QQ';message['contactQQ']='Invalid QQ';pass=!1}else pass=!0;return pass},gamename:function(text){var app_name=$.trim(text),app_id=$('#app_id').val(),pass=!0;if(0==app_name.length||0==$.trim(app_name).length){message['gamename']="Please fill in game name";pass=!1}return pass},oneword:function(text){var oneword=$.trim(text),oneword_validate=oneword.match(/[\s\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=\，\。\、\‘\’\“\”\[\]\【\】\,;\\\\]+/),oneword_validate2=oneword.match(/[\uFF00-\uFFFF]/),pass=!0;if(oneword_validate){message['oneword']='This field must consist of letter and number.';message['summary']='This field must consist of letter and number.';message['app_subname']='This field must consist of letter and number.';return pass=!1}else if(oneword_validate2){message['oneword']='This field must consist of letter and number.';message['summary']='This field must consist of letter and number.';message['app_subname']='This field must consist of letter and number.';pass=!1}return pass},onewordTrim:function(text){var oneword,pass=!0;if($.trim(text).length<=0){message['onewordTrim']='A one-sentence summary cannot be empty.';message['summary']='A one-sentence summary cannot be empty.';message['app_subname']='A one-sentence summary cannot be empty.';return pass=!1}return pass},appdesc:function(text){var desc=$.trim(text),pass=!0;if(desc.length<50){message['appdesc']='Description cannot be less than 50 words.';pass=!1}else if(desc.length>=1500){message['appdesc']='Description cannot be over 1500 words.';pass=!1}return pass},verdesc:function(text){var desc=$.trim(text),pass=!0;if(desc.length<10){message['verdesc']='Version description cannot be less than 10 words.';pass=!1}else if(desc.length>=1500){message['verdesc']='Version description cannot be over 1500 words.';pass=!1}return pass},bankcode:function(text){var bankcode,bankcode_validate,pass=!0;if(!$.trim(text.replace(/\s/g,'')).match(/^\d{5,25}$/)){message['bankcode']="Please fill in valid bank code.";pass=!1}else pass=!0;return pass},postcode:function(text){var postcode,postcode_validate,pass=!0;if(!$.trim(text).match(/^[1-9][0-9]{5}$/)){message['postcode']="Invalid postcode！The first number of postcode cannot be zero and must consist of 6-digit number,e.g.51800";pass=!1}else pass=!0;return pass},pkgNameEndStr:function(text){var pkgStandard=".nearme.gamecenter",pkgname,endWith;if(function(str,endStr){var d=str.length-endStr.length;return d>=0&&str.lastIndexOf(endStr)==d}($.trim(text),pkgStandard))pass=!0;else{message['pkgNameEndStr']='Package name must end with "nearme.gamecenter';pass=!1}return pass},forbiddenWord:function(text){return!0},screenshots:function(text){for(var files=text.split(","),screenshotsNumber=files.length,pass=!0,i=0;i<files.length;i++)if(''==files[i])screenshotsNumber--;if(screenshotsNumber<3){message['pic_url']="Please upload 3-5 screenshots";pass=!1}return pass},screenshots2:function(text){for(var files=text.split(","),screenshotsNumber=files.length,pass=!0,i=0;i<files.length;i++)if(''==files[i])screenshotsNumber--;if(screenshotsNumber<4){message['pictures_url']="Please upload 4-5 screenshots";pass=!1}return pass},copyrights:function(text){for(var files=text.split(","),copyrightsNumber=files.length,pass=!0,i=0;i<files.length;i++)if(''==files[i])copyrightsNumber--;if(copyrightsNumber<1){message['copyright_url']="Please upload 1-3 screenshots os other app store";pass=!1}return pass},whiteList:function(text){var textArray,pass=!0;if((text=text.replace(/[\n\r]/g,",")).split(",").length>5){message['whiteList']="The test list cannot be empty and each line contains one but no more than five.";pass=!1}else $('[name="whiteList"]').val(text);return pass},integer:function(text){var integer,integer_validate,pass=!0;if(!$.trim(text).match(/^\+?[1-9][0-9]*$/)){message['amount']="The number must be integer.";message['maxCutAmount']="The number must be integer.";message['totalNum']="The number must be integer.";message['participateTimes']="The number must be integer.";message['totalAttendTimes']="The number must be integer.";pass=!1}else{message['amount']="Please fill in deposit sum.";message['maxCutAmount']="Please fill in the biggest discount sum for each single order.";message['totalNum']="Please fill in the total amount of red envelopes.";message['participateTimes']="Please fill in partake times of each user.";message['totalAttendTimes']="Please fill in total partake times of the activity."}return pass},rate:function(text){var rate=$.trim(text),rate_validate,pass=!0;if(!rate.match(/^\+?[1-9][0-9]*$/)){message['rate']="Only integer supported";pass=!1}else if(rate>=100){message['rate']="Please fill in numbers between 1-99.";pass=!1}else message['rate']="Please fill in discount rate.";return pass},cutAmount:function(text){var cutAmount=$.trim(text),amount=$('[name="amount"]').val(),cutAmount_validate,pass=!0;if(!cutAmount.match(/^\+?[1-9][0-9]*$/)){message['cutAmount']="Only integer supported.";pass=!1}else if(parseInt(cutAmount)>=parseInt(amount)){message['cutAmount']="The discount sum must be smaller than deposit sum.";pass=!1}else message['cutAmount']="Please fill in discount sum.";return pass},redPacketAmount:function(text){var redPacketAmount=$.trim(text),radioChannelType=$('[name="radioChannelType"]:checked').val(),redPacketAmount_validate,pass=!0;if(!redPacketAmount.match(/^(\d+\.\d{1,1}|\d+)$/)){message['redPacketAmount']="You can only type in number and precise to one decimal.";pass=!1}else if('ALIPAY'==radioChannelType&&redPacketAmount<.2){message['redPacketAmount']="The minimum sum of money inside the red envelope in Alipay is 0.2 RMB.";pass=!1}else if('WECHAT'==radioChannelType&&redPacketAmount<1){message['redPacketAmount']="The minimum sum of money inside the red envelope in Wechat is one RMB.";pass=!1}else message['redPacketAmount']="Please fill in sum of the cash inside the red envelope.";return pass},worksUrl:function(text){var worksUrl=$.trim(text),check=new RegExp("<script>"),pass=!0;if(/^https?:\/\//.test(worksUrl)){pass=!0;if(check.test(text)){pass=!1;message['return_url']='存在异常文本，请输入正确的回调地址'}return pass}else{message['return_url']='请填写回调地址，以http://或者https://开头';pass=!1}message['return_url']='请填写回调地址，以http://或者https://开头';return pass},mediaAccountName:function(text){function getBLen(str){if(null==str)return 0;if("string"!=typeof str)str+="";return str.replace(/[^\x00-\xff]/g,"01").length}var oneword=$.trim(text),oneword_validate=oneword.match(/[\<\>\/\|\!\#\@\$\^\&\*\(\)\{\}\:\'\"\.\?\-\+\=\，\。\、\‘\’\“\”\[\]\【\】\,;\\\\]+/),oneword_validate2=oneword.match(/[\uFF00-\uFFFF]/);if(oneword_validate){message['media_account_name']='Punctuations are prohibited!';return!1}else if(oneword_validate2){message['media_account_name']='Punctuations and space are prohibited!';return!1}else{var nameLength=getBLen(text=$.trim(text));if(0==nameLength){message['media_account_name']='Please fill in content service account name.';return!1}else if(nameLength<4||nameLength>20){message['media_account_name']='Content service account name must be 4 to 20 letters.';return!1}return!0}},lengthLimit:function(val,$ele){if(''==val)return!0;var maxleng=parseInt($ele.attr('max-length')),minleng=parseInt($ele.attr('min-length')),$tips=$ele.parent().find('.error-tip');void 0===$tips.attr('error-tip')?$tips.attr('error-tip',$tips.text()):'';if(val.length>maxleng){$tips.text($tips.attr('error-tip')+'It has already exceeded '+(val.length-maxleng)+' letters!');return!1}if(val.length<minleng){$tips.text($tips.attr('error-tip')+'It still lacks '+(minleng-val.length)+' letters!');return!1}return!0}};$('input[required]').on('after:length-limit',function(event,element){var iptEl=$(element),errorEl=iptEl.parent().find('.error-tip');if(patterns.lengthLimit(iptEl.val(),iptEl))errorEl.text(errorEl.attr('error-tip'));else iptEl.parent().addClass('error empty')});$('textarea[required]').on('after:length-limit',function(event,element){var iptEl=$(element),errorEl=iptEl.parent().find('.error-tip');if(patterns.lengthLimit(iptEl.val(),iptEl))errorEl.text(errorEl.attr('error-tip'));else iptEl.parent().addClass('error empty')});$('input[required]').on('after:change-msg',function(event,element){var iptEl=$(element),errorEl=iptEl.parent().find('.error-tip'),iptType=iptEl.attr('name')||iptEl.attr('data-type')||iptEl.attr('type');if(!originMessage[iptType])originMessage[iptType]=errorEl.text();errorEl.text(message[iptType]||originMessage[iptType])});$('textarea[required]').on('after:change-msg',function(event,element){var textareaEl=$(element),errorEl=textareaEl.parent().find('.error-tip'),textareaType=textareaEl.attr('name');if(!originMessage[textareaType])originMessage[textareaType]=errorEl.text();errorEl.text(message[textareaType]||originMessage[textareaType])});$('[needTrim]').bind('keyup',function(e){$(this).val($(this).val().replace(/\s+/g,''))});$form.on("submit",function(event){event.preventDefault()});$form.validator(options,patterns,message);return{form:$form,options:options,patterns:patterns,message:message}})},{"../../../vendor/scripts/validator.min":2}],2:[function(require,module,exports){~function($){var patterns,fields,errorElement,addErrorClass,removeErrorClass,novalidate,validateForm,validate,validateFields,removeFromUnvalidFields,asyncValidate,getVal,aorbValidate,validateReturn,unvalidFields=[],frontValidation,messages,protocols,userInfo,domain,port,ip,address,domainType,ipType,rDomain,rIP;patterns={email:function(text){return/^(?:[a-z0-9]+[_\-+.]+)*[a-z0-9]+@(?:([a-z0-9]+-?)*[a-z0-9]+.)+([a-z]{2,})+$/i.test(text)},date:function(text){var reg=/^([1-2]\d{3})([-\/.])?(1[0-2]|0?[1-9])([-\/.])?([1-2]\d|3[01]|0?[1-9])$/,taste,d,year,month,day;if(!reg.test(text))return!1;year=+(taste=reg.exec(text))[1];month=+taste[3]-1;day=+taste[5];return year===(d=new Date(year,month,day)).getFullYear()&&month===d.getMonth()&&day===d.getDate()},mobile:function(text){return/^1[3-9]\d{9}$/.test(text)},tel:function(text){return/^(?:(?:0\d{2,3}[- *]?[1-9]\d{6,7})|(?:[48]00[- *]?[1-9]\d{6}))$/.test(text)},number:function(input){var min=$.trim(this.$item.attr('min')),max=$.trim(this.$item.attr('max')),result=/^\-?(?:[1-9]\d*|0)(?:[.]\d+)?$/.test(input),text=+input,step=$.trim(this.$item.attr('step'));min=''===min||isNaN(min)?text-1:+min;max=''===max||isNaN(max)?text+1:+max;step=''===step||isNaN(step)?0:+step;return result&&(0>=step?text>=min&&text<=max:0===(text+min)%step&&text>=min&&text<=max)},range:function(text){return this.number(text)},url:(protocols='((https?|s?ftp|irc[6s]?|git|afp|telnet|smb):\\/\\/)?',userInfo='([a-z0-9]\\w*(\\:[\\S]+)?\\@)?',port='(:\\d{1,5})?',address='(\\/\\S*)?',ipType=[protocols,userInfo,'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}',port,address],rDomain=new RegExp('^'+[protocols,userInfo,'(?:localhost|(?:[a-z0-9]+(?:[-\\w]*[a-z0-9])?(?:\\.[a-z0-9][-\\w]*[a-z0-9])*)*\\.[a-z]{2,})',port,address].join('')+'$','i'),rIP=new RegExp('^'+ipType.join('')+'$','i'),function(text){return rDomain.test(text)||rIP.test(text)}),password:function(text){return this.text(text)},checkbox:function(){return patterns._checker('checkbox')},radio:function(){return patterns._checker('radio')},_checker:function(type){var form=this.$item.parents('form').eq(0),identifier='input[type='+type+'][name="'+this.$item.attr('name')+'"]',result=!1,$items;$(identifier,form).each(function(i,item){if(item.checked&&!result)return result=!0});return result},text:function(text){if(!(text=$.trim(text)).length)return;var max=parseInt(this.$item.attr('maxlength'),10),min=parseInt(this.$item.attr('minlength'),10),range;return(range=function(){var ret=!0,length=text.length;if(min)ret=length>=min;if(max)ret=ret&&length<=max;return ret})()}};asyncValidate=function($item,klass,isErrorOnParent){var data=$item.data(),url=data.remote,method=data.method||'get',key=data.key||'key',text=getVal($item),params={};params[key]=text;$[method](url,params).success(function(isValidate){var message=0===isValidate.errno?'IM VALIDED':'unvalid',type=$item.attr('name')||$item.attr('data-type')||$item.attr('type')||'text';messages[type]=isValidate.data.message;return validateReturn.call(this,$item,klass,isErrorOnParent,message)}).error(function(){})};aorbValidate=function($item,klass,isErrorOnParent){var id='a'===$item.data('aorb')?'b':'a',$pair=$('[data-aorb='+id+']',$item.parents('form').eq(0)),a=[$item,klass,isErrorOnParent],b=[$pair,klass,isErrorOnParent],result=0;result+=validateReturn.apply(this,a)?0:1;return result=(result+=validateReturn.apply(this,b)?0:1)>0?(removeErrorClass.apply(this,a),removeErrorClass.apply(this,b),!1):validateReturn.apply(this,a.concat('unvalid'))};validateReturn=function($item,klass,parent,message){if(!1===$item.is(':visible'))return!1;if($item.is(':disabled'))return!1;if(!$item)return'DONT VALIDATE UNEXIST ELEMENT';var pattern,type,val,ret,event;(pattern=$item.attr('pattern'))&&pattern.replace('\\','\\\\');type=$item.attr('data-type')||$item.attr('type')||'text';type=patterns[type]?type:'text';val=$.trim(getVal($item));event=$item.data('event');if('undefined'!==typeof $item.attr('checknoempty')&&''===val)return!1;if('unvalid'===(message=message?message:pattern?new RegExp(pattern).test(val)||'unvalid':patterns[type](val)||'unvalid'))removeErrorClass($item,klass,parent);return/^(?:unvalid|empty)$/.test(message)?(ret={$el:addErrorClass.call(this,$item,klass,parent,message),type:type,error:message},$item.trigger('after:'+event,$item),ret):(removeErrorClass.call(this,$item,klass,parent),$item.trigger('after:'+event,$item),!1)};fields=function(identifie,form){return $(identifie,form)};getVal=function($item){return $item.val()||($item.is('[contenteditable]')?$item.text():'')};validate=function($item,klass,parent){var async,aorb,type,val,commonArgs,event;patterns.$item=$item;type=$item.attr('type');val=getVal($item);async=$item.data('remote');aorb=$item.data('aorb');event=$item.data('event');commonArgs=[$item,klass,parent];event&&$item.trigger('before:'+event,$item);if(!/^(?:radio|checkbox)$/.test(type)&&!aorb&&!patterns.text(val))return validateReturn.call(this,$item,klass,parent,val.length?'unvalid':'empty');if(aorb)return aorbValidate.apply(this,commonArgs);if(async)if(!1===(frontValidation=validateReturn.call(this,$item,klass,parent)))return asyncValidate.apply(this,commonArgs);return validateReturn.call(this,$item,klass,parent)};validateFields=function($fields,method,klass,parent){var reSpecialType=/^radio|checkbox/,field;$.each($fields,function(i,f){$(f).on(reSpecialType.test(f.type)||'SELECT'===f.tagName?'change blur':method,function(){var $items=$(this);if(reSpecialType.test(this.type))$items=$('input[type='+this.type+'][name='+this.name+']',$items.closest('form'));$items.each(function(){(field=validate.call(this,$(this),klass,parent))&&unvalidFields.push(field)})})})};validateForm=function($fields,method,klass,parent){if(method&&!validateFields.length)return!0;unvalidFields=$.map($fields,function(el){var field=validate.call(null,$(el),klass,parent);if(field)return field});return validateFields.length?unvalidFields:!1};removeFromUnvalidFields=function($item){var obj,index;if(!(obj=$.grep(unvalidFields,function(item){return item.$el=$item})[0]))return;index=$.inArray(obj,unvalidFields);unvalidFields.splice(index,1);return unvalidFields};errorElement=function($item,parent){return $item.data('parent')?$item.closest($item.data('parent')):parent?$item.parent():$item};addErrorClass=function($item,klass,parent,emptyClass){return errorElement($item,parent).addClass(klass+' '+emptyClass)};removeErrorClass=function($item,klass,parent){removeFromUnvalidFields.call(this,$item);return errorElement($item,parent).removeClass(klass+' empty unvalid')};novalidate=function($form){return $form.attr('novalidate')||$form.attr('novalidate','true')};$.fn.validator=function(_options,ptns,msgs){var $form=this,options=_options||{},identifie=options.identifie||'[required]',klass=options.klass||'error',isErrorOnParent=options.isErrorOnParent||!1,method=options.method||'blur',before=options.before||function(){return!0},after=options.after||function(){return!0},errorCallback=options.errorCallback||function(){},$items=fields(identifie,this);patterns=$.extend(patterns,ptns);messages=msgs;novalidate(this);method&&validateFields.call(this,$items,method,klass,isErrorOnParent);this.on('focusin',identifie,function(){removeErrorClass.call(this,$(this),'error unvalid empty',isErrorOnParent)});this.on('submit',function(e){before.call(this,$items);validateForm.call(this,$items,method,klass,isErrorOnParent);return unvalidFields.length?(e.preventDefault(),errorCallback.call(this,unvalidFields)):after.call(this,e,$items)})}}(window.jQuery||window.Zepto)},{}]},{},[1]);!function(root,factory){if('function'===typeof define&&define.amd)define([],factory);else if('object'===typeof exports)module.exports=factory();else root.Captcha=factory()}(this,function(){var Captcha=function(container,data,config,callbacks){this.$container=container instanceof $?container:$(container);this.config={url:'/user/signin/captcha?refresh=1'};if(config)this.config=$.extend(!0,this.config,config);this.callbacks={};if(callbacks)this.callbacks=$.extend(!0,this.callbacks,callbacks);this.Init()};Captcha.prototype={Init:function(){var self=this;this.HTML='<div class="captcha">'+'<img src="" class="captcha-img" width="100"><a href="javascript:void(0)" class="captcha-handler">refresh</a>'+'</div>';this.$el=$(this.HTML).appendTo(this.$container);this.$img=this.$el.find('.captcha-img');this.$el.bind('click',function(e){var tgt=e.target;if('captcha-img'===tgt.className||'captcha-handler'===tgt.className)self._getCaptcha()});this._getCaptcha();document.addEventListener('reset-captcha',function(){self.reset()},!1)},_setImg:function(src){if(!window.location.origin)window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?':'+window.location.port:'');this.$img.attr('src',window.location.origin+src)},_getCaptcha:function(){var self=this;$.ajax({type:"POST",url:this.config.url,success:function(res){if(0===res.errno)self._setImg(res.data.url)}})},reset:function(){this._getCaptcha()}};return Captcha});!function(root,factory){if('function'===typeof define&&define.amd)define([],factory);else if('object'===typeof exports)module.exports=factory();else root.Common=factory()}(this,function(){var oppoCustomerService=null;$('.nav-scroll').bind('click',function(e){var $tgt=$(e.target);if($tgt.hasClass('customer-service'))if(null==oppoCustomerService||oppoCustomerService.closed)if('about:blank'==(oppoCustomerService=window.open('','OPPO-Customer-Service','width=800,height=600,titlebar=0,location=0')).location.href)oppoCustomerService=window.open('//v2.live800.com/live800/chatClient/chatbox.jsp?companyID=800642&configID=126640&jid=3968206559','OPPO-Customer-Service','width=800,height=600,titlebar=0,location=0');else oppoCustomerService.focus();else oppoCustomerService.focus();else if($tgt.hasClass('to-top'))$("html, body").animate({scrollTop:0},1e3);else if($tgt.hasClass('business'))window.location='https://developers.oppomobile.com/wiki/doc/index#id=88';else if($tgt.hasClass('help'))window.location='/wiki/doc/index';else if($tgt.hasClass('workOrder'))window.location='/order/index#/order/list'});$('.customer-service, a.consult').bind('click',function(e){if(null==oppoCustomerService||oppoCustomerService.closed)if('about:blank'==(oppoCustomerService=window.open('','OPPO-Customer-Service','width=800,height=600,titlebar=0,location=0')).location.href)oppoCustomerService=window.open('//v2.live800.com/live800/chatClient/chatbox.jsp?companyID=800642&configID=126640&jid=3968206559','OPPO-Customer-Service','width=800,height=600,titlebar=0,location=0');else oppoCustomerService.focus();else oppoCustomerService.focus()});$('.logged .dropdown-menu-user').bind('click',function(e){var tgt=e.target;if('logout'===tgt.className)$.ajax({type:"POST",url:'/user/logout',success:function(res){if(0===res.errno)window.location='/home/index'}});else if('userinfo'===tgt.className)window.location='/user/main#/user/profile';else if('message'===tgt.className)window.location='/service/message/index';if('work_order'===tgt.className)window.location='/order/index#/order/list'});$('.switch-modal').click(function(e){$('#'+$(this).data('it')).modal('hide');$('#'+$(this).data('id')).modal('show')});$('.modal').ready(function(){$('.modal').on('shown.bs.modal',function(){var $popupWindow=$('.modal.fade.in .modal-dialog'),top=$popupWindow.height()/2,left=$popupWindow.width()/2;$popupWindow.css({'margin-top':'-'+top+'px'})})});var href='';$('body').on('click','a[needlogin]',function(e){if(!window.loginSuccess){e.preventDefault();var loginUrl=$('input[name="login_url"]').val();if(loginUrl){var ssoUrl=window.location.href,href2=loginUrl+escape(ssoUrl);window.location.href=href2}else{$('#signInModal').modal('show');href=$(this).attr('href')}}});$('.close-alert-btn').on('click',function(){$('.alert-danger').hide()});function getPath(){var location,hostPath=window.location.pathname;return hostPath=hostPath.replace('#','').replace(/\?[\w\/\.?=]*/g,'')}function getMessageModal(path){$.get('/service/active-message/list',{uri:path},function(res){if('string'===typeof res&&''!==res)if($(res).filter('#messageModal').length){$('body').append(res);$('#messageModal').modal('show')}})}getMessageModal(getPath());$('body').on('pageChange',function(e,url){getMessageModal(url.replace('#','').replace(/\?[\w\/\.?=\&]*/g,''))});$.ajaxSetup({beforeSend:function(e,xhr){window.ajaxBeforeSendDeferred(xhr.url).then(function(res){if(0!=res.errno)return;xhr.data.set('sign',res.data[0])})}});var timeOut=null,$navDropdown=$('#navDropdown');$('#navMenu li').hover(function(e){var target=$(this).attr('data-toggle'),$target=$('#navDropdown [data-target="'+target+'"]');if($target.length){$(this).addClass('active');$navDropdown.stop(!0).slideDown(250);clearTimeout(timeOut);timeOut=setTimeout(function(){$target.addClass('active').siblings().removeClass('active')},100)}});$('#navMenu li, #navDropdown').on('mouseleave',function(e){if(e.relatedTarget===$('#navDropdown')[0]||$(e.relatedTarget).closest('#navDropdown').length>=1)return;$('#navMenu li').removeClass('active');$navDropdown.stop(!0).slideUp(150,function(){$('#navDropdown [data-target]').removeClass('active')})});window.ajaxBeforeSendDeferred=function(url){var pathName=url.split('//')[1]||'',end=-1===pathName.indexOf('?')?void 0:pathName.indexOf('?');if('/api/utility/upload'===(pathName=pathName.substring(pathName.indexOf('/'),end)))return $.ajax({url:'/resource/publish/gensign',type:'post',async:!1,beforeSend:!1});return $.Deferred().reject()}});